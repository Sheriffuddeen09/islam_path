working on

1. the performance and accuracy should be only for user login in the dashboard not overall student
public function performanceSplit()
    {
        return [
            'assignments' => DB::table('assignment_results')
                ->avg(DB::raw('score * 100.0 / total_questions')),

            'exams' => DB::table('exam_results')
                ->avg(DB::raw('score * 100.0 / total_questions')),
        ];
    }

   
    public function accuracy()
    {
        return [
            'assignment_accuracy' => DB::table('assignment_results')
                ->avg(DB::raw('score * 100.0 / total_questions')),

            'exam_accuracy' => DB::table('exam_results')
                ->avg(DB::raw('score * 100.0 / total_questions')),
        ];
    }

2. student should be rank according to their average scores 
public function studentAnalytics()
    {
    return DB::table('users')
    ->where('role', 'student')
    ->leftJoin('assignment_results', 'users.id', '=', 'assignment_results.student_id')
    ->leftJoin('exam_results', 'users.id', '=', 'exam_results.student_id')
    ->leftJoin('student_badges', 'users.id', '=', 'student_badges.student_id')
    ->select(
    'users.id',
    DB::raw("users.first_name || ' ' || users.last_name as name"),
    DB::raw("AVG(assignment_results.score * 100.0 / assignment_results.total_questions) as assignment_avg"),
    DB::raw("AVG(exam_results.score * 100.0 / exam_results.total_questions) as exam_avg"),
    DB::raw("AVG(assignment_results.score * 100.0 / assignment_results.total_questions) as avg_score"),
    DB::raw('(SELECT COALESCE(SUM(badges),0) FROM student_badges WHERE student_badges.student_id = users.id) as total_badges')

    )
    ->groupBy('users.id')
    ->get();
    }


    
* the performance is not showing


* if i click the message in the profile it should open directly the student message box 
* student should request for teacher by 15 badges and when student register they should be given 30 badges

